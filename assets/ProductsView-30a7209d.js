import{S as d}from"./sweetalert2.all-35044af0.js";import{_ as f,r as b,o as n,c as a,d as c,a as t,F as u,e as C,n as P,t as r,b as k,w as v,f as x}from"./index-e4da0025.js";const{VITE_APP_URL:_,VITE_APP_PATH:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"zxcv123",BASE_URL:"/Vue3_Week7/",MODE:"production",DEV:!1,PROD:!0},y={data(){return{products:[],addCartLoading:null,fullPage:!1}},methods:{getProducts(){const s=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!1,onCancel:this.onCancel,loader:"dots",width:100,height:100,color:"gray"});this.$http.get(`${_}v2/api/${g}/products`).then(o=>{this.products=o.data.products,s.hide()}).catch(o=>{d.fire({title:o.response.data.message,icon:"error",confirmButtonText:"OK"}),s.hide()})},addToCart(s,o=1){const h={product_id:s,qty:o};this.addCartLoading=s,this.$http.post(`${_}v2/api/${g}/cart`,{data:h}).then(i=>{d.fire({title:i.data.message,icon:"success",confirmButtonText:"OK"}),this.addCartLoading=null}).catch(i=>{d.fire({title:i.response.data.message,icon:"error",confirmButtonText:"OK"})})}},mounted(){this.getProducts()}},T={class:"table align-middle"},L=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),V={style:{width:"200px"}},$={key:0,class:"h5"},E={key:1},w={class:"h6"},A={class:"h5"},B={class:"btn-group btn-group-sm"},R=["onClick","disabled"],I={key:0,class:"spinner-border spinner-border-sm",role:"status"};function O(s,o,h,i,l,p){const m=b("RouterLink");return n(),a(u,null,[c(" 這是產品列表 "),t("table",T,[L,t("tbody",null,[(n(!0),a(u,null,C(l.products,e=>(n(),a("tr",{key:e.id},[t("td",V,[t("div",{style:P([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,r(e.title),1),t("td",null,[e.price===e.origin_price?(n(),a("div",$,r(e.price)+" 元 ",1)):(n(),a("div",E,[t("del",w,"原價 "+r(e.origin_price)+" 元",1),t("div",A,"現在只要 "+r(e.price)+" 元",1)]))]),t("td",null,[t("div",B,[k(m,{to:`/product/${e.id}`,class:"btn btn-outline-secondary"},{default:v(()=>[c(" 查看更多產品細節")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-outline-danger",onClick:S=>p.addToCart(e.id),disabled:l.addCartLoading===e.id},[l.addCartLoading===e.id?(n(),a("span",I)):x("",!0),c(" 加到購物車 ")],8,R)])])]))),128))])])],64)}const U=f(y,[["render",O]]);export{U as default};
